在RISC-V架构中，中断处理的流程确实有所不同，但基本原理类似。

当中断发生时，RISC-V处理器会：

1. 首先跳转到中断向量表中设置的地址（由`mtvec`寄存器指定）
2. 接着通过读取`mcause`寄存器来确定中断的类型和原因
3. 根据`mcause`的值，处理器可以确定是什么类型的中断（外部中断、软件中断、定时器中断等）

对于外设数据（例如类似键盘输入这样的数据），RISC-V通常会：
- 通过内存映射I/O（MMIO）而不是专用I/O端口来访问
- 在确定中断类型后，处理程序会访问相应设备的内存映射地址来读取数据

关于维护责任：
- 在RISC-V中，这个过程通常是由一个结合了BIOS和固件功能的SBI（Supervisor Binary Interface）或SEE（Supervisor Execution Environment）来处理的
- SBI提供了一个抽象层，位于硬件和操作系统之间
- 基本的中断向量设置和初始中断处理通常是由这个固件层负责的
- 但具体的设备驱动程序和中断处理通常由操作系统完成

所以，在RISC-V中，基础中断机制由固件（类似BIOS的功能）设置，但具体的设备中断处理通常由操作系统实现。时钟中断特别地，通常会读取`mtime`或`time`寄存器来获取时间信息，这个过程可能由SBI提供支持，但详细处理通常在操作系统层面完成。


MMIO（内存映射输入/输出）的实现和维护涉及硬件和软件层面的协作：

## 硬件层面

1. **地址空间分配**：
   - 在处理器设计阶段，特定的物理地址范围被保留用于MMIO
   - 这些地址不指向实际RAM，而是映射到外设的寄存器

2. **地址解码**：
   - 当CPU发出内存访问请求时，地址解码器会检查该地址
   - 如果地址落在MMIO范围内，访问请求会被路由到相应的外设，而不是内存控制器

3. **总线控制**：
   - 特定的总线协议（如AXI、APB等）处理CPU和外设之间的通信
   - 这些协议定义了如何传输读写请求和数据

## 软件层面

1. **固件初始化**：
   - SBI/SEE（RISC-V固件）初始化阶段会设置基本的MMIO映射
   - 它可能配置内存管理单元(MMU)或物理内存保护单元(PMP)来控制对这些区域的访问

2. **操作系统管理**：
   - 操作系统维护MMIO区域的虚拟内存映射（如果使用MMU）
   - 它需确保这些区域正确映射，并具有适当的缓存属性（通常设为"不可缓存"）
   - 操作系统通过驱动程序提供对这些区域的访问API

3. **设备驱动程序**：
   - 驱动程序知道设备寄存器的具体地址映射和使用方法
   - 它们通过读写这些内存映射地址与设备交互
   - 驱动程序还处理设备发出的中断

## 访问过程

当软件需要访问外设时：

1. 程序调用操作系统API或直接访问映射地址（在特权模式下）
2. CPU执行load/store指令，使用目标外设的映射地址
3. 地址解码逻辑将这个访问路由到外设，而不是RAM
4. 外设响应请求，执行相应操作并可能返回数据
5. 如果操作触发外设状态变化，外设可能产生中断

整个MMIO系统的维护是硬件设计者、固件开发者和操作系统开发者共同负责的，每一层都有各自的职责，共同确保CPU可以通过统一的内存访问指令与各种外设进行交互。